<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Калькуляторы для трейдинга</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script
      type="text/javascript"
      src="https://s3.tradingview.com/tv.js"
    ></script>
    <style>
      /* Убираем стрелки с полей type="number" */
      input[type="number"]::-webkit-outer-spin-button,
      input[type="number"]::-webkit-inner-spin-button {
        -webkit-appearance: none;
        margin: 0;
      }

      input[type="number"] {
        -moz-appearance: textfield;
      }
    </style>
  </head>
  <body class="bg-gray-900">
    <div class="flex min-h-screen">
      <!-- Боковое меню -->
      <div class="w-64 bg-gray-800 shadow-md p-6">
        <div class="flex justify-between items-center mb-6">
          <h2 class="text-lg font-semibold text-gray-800 dark:text-white">
            Настройки
          </h2>
        </div>
        <form id="settingsForm" class="space-y-4">
          <div>
            <label
              class="block text-sm font-medium text-gray-700 dark:text-gray-300"
            >
              Баланс (USDT)
            </label>
            <input
              inputmode="decimal"
              id="defaultBalance"
              class="mt-1 block w-full rounded-md border-gray-300 py-2 px-4 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"
            />
          </div>
          <div>
            <label
              class="block text-sm font-medium text-gray-700 dark:text-gray-300"
            >
              Уровень риска (%)
            </label>
            <input
              inputmode="decimal"
              id="defaultRisk"
              step="0.1"
              class="mt-1 block w-full rounded-md border-gray-300 py-2 px-4 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"
            />
          </div>
          <button
            type="submit"
            class="w-full bg-green-500 text-white py-2 px-4 rounded-md hover:bg-green-600 transition-colors"
          >
            Сохранить настройки
          </button>
        </form>
      </div>

      <!-- Основной контент -->
      <div class="flex-1 flex">
        <!-- Калькулятор слева -->
        <div class="w-1/3 p-8 bg-gray-900">
          <div class="flex justify-between items-center mb-8">
            <h1 class="text-2xl font-bold text-white">Калькулятор позиции</h1>
            <button
              type="button"
              id="resetAll"
              class="text-sm text-gray-400 hover:text-white transition-colors duration-200"
            >
              Сбросить
            </button>
          </div>

          <!-- Калькулятор размера позиции -->
          <div
            class="bg-gray-800 rounded-xl p-6 shadow-lg border border-gray-700"
          >
            <form id="positionSizeForm" class="space-y-6">
              <div>
                <label class="block text-sm font-medium text-gray-300 mb-2"
                  >Баланс</label
                >
                <div class="relative">
                  <input
                    inputmode="decimal"
                    id="balance"
                    class="w-full bg-gray-700 border-0 rounded-lg py-3 px-4 text-white focus:ring-2 focus:ring-blue-500 transition-all duration-200"
                    required
                  />
                  <span class="absolute right-4 top-3 text-gray-400">USDT</span>
                </div>
              </div>

              <div>
                <label class="block text-sm font-medium text-gray-300 mb-2"
                  >Стоп-лосс</label
                >
                <div class="relative">
                  <input
                    inputmode="decimal"
                    id="stopLoss"
                    step="0.01"
                    class="w-full bg-gray-700 border-0 rounded-lg py-3 px-4 text-white focus:ring-2 focus:ring-blue-500 transition-all duration-200"
                    required
                  />
                  <span class="absolute right-4 top-3 text-gray-400">%</span>
                </div>
              </div>

              <div>
                <label class="block text-sm font-medium text-gray-300 mb-2"
                  >Риск</label
                >
                <div class="relative">
                  <input
                    inputmode="decimal"
                    id="riskLevel"
                    step="0.1"
                    class="w-full bg-gray-700 border-0 rounded-lg py-3 px-4 text-white focus:ring-2 focus:ring-blue-500 transition-all duration-200"
                    required
                  />
                  <span class="absolute right-4 top-3 text-gray-400">%</span>
                </div>
              </div>
            </form>

            <div
              id="positionResult"
              class="mt-6 pt-6 border-t border-gray-700 hidden"
            >
              <div class="space-y-4">
                <div class="flex justify-between items-center">
                  <span class="text-gray-400">Возможная потеря:</span>
                  <span
                    id="lossAmount"
                    class="text-lg font-medium text-red-400"
                  ></span>
                </div>
                <div class="flex justify-between items-center">
                  <span class="text-gray-400">Размер позиции:</span>
                  <span
                    id="positionSize"
                    class="text-lg font-medium text-green-400"
                  ></span>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- График справа -->
        <div class="w-2/3 h-screen p-0">
          <div
            id="chart-wrapper"
            style="
              width: 100%;
              height: 100vh;
              border: 1px solid #374151;
              border-radius: 0;
              overflow: hidden;
              position: relative;
              background: #131722;
            "
          >
            <div
              id="chart"
              style="
                width: 100%;
                height: 100%;
                position: absolute;
                top: 0;
                left: 0;
              "
            ></div>
          </div>
        </div>
      </div>
    </div>

    <script src="app.js"></script>
  </body>
</html>
